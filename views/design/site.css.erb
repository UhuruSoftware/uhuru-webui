<%
    def html2rgb(html_color, alpha=1)
        rgb = Color::RGB.from_html(html_color)
        red = (rgb.r * 255).to_i
        green = (rgb.g * 255).to_i
        blue = (rgb.b * 255).to_i
        "rgba(#{red},#{green},#{blue},#{alpha})"
    end
%>

/************************** BODY AND FONTS ****************************/

html, body
{
    margin: 0;
    padding: 0;
    background-color: <%= design['background-color'] %>;

    /*http://bg.siteorigin.com/*/
    /*http://colorschemedesigner.com/#0142kuettxQGE*/
    background-image: <%= design['background-image'] %>;

    background-repeat: repeat;
    background-attachment:fixed;
    background-position: 50% 0%;
    font-family: "<%= design['font-family'] %>";
    font-weight: 200;
    color: <%= design['font-color'] %>;

    <% if design['background-repeat'] == 'false' %>
        background-repeat: no-repeat;
    <% end %>
}

a
{
    text-decoration: none;
}

<% design['link'].each do |style, color| %>
a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

@font-face {
    font-family: '<%= design['font-family'] %>';
    src: url('fonts/Quicksand-Light.eot');
    src: local('â˜º'), url('fonts/Quicksand-Light.woff') format('woff'), url('fonts/Quicksand-Light.ttf') format('truetype'), url('fonts/Quicksand-Light.svg') format('svg');
    font-weight: normal;
    font-style: normal;
}

/************************** ERROR MESSAGES AND WARNINGS ****************************/
.error
{
    margin: 5px;
    border: 1px solid <%= design['error']['border-color'] %>;
    color: <%= design['error']['font-color'] %>;
    background-color: <%= design['error']['background-color'] %>;
    padding: 5px;
    text-align: center;
}
.warning
{
    margin: 5px;
    border: 1px solid <%= design['warning']['border-color'] %>;
    color: <%= design['warning']['font-color'] %>;
    background-color: <%= design['warning']['background-color'] %>;
    padding: 5px;
    text-align: center;
}



/************************** HEADER ****************************/

#header_container
{
    background-color: <%= design['header']['background-color'] %>;


    background-repeat: repeat;
    background-attachment:fixed;


    color: <%= design['header']['font-color'] %>;
    border:3px solid <%= design['header']['border-color'] %>;
    border-width: 0 0 3px 0;
    height:60px; left:0;
    position:fixed;
    width:100%;
    top:0;
    z-index: 50;
}

<% design['header']['link'].each do |style, color| %>
#header_container a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

#header
{
    margin:0 auto;
    width:940px;
    text-align:center;
}

#header h1
{
    float: left;
    margin: 0;
    line-height: 50px;
    height: 50px;
}

#header #login_control
{
    float: right;
    margin-top: 10px;
}

#cloud_target
{
    text-decoration: underline;
    font-weight: 500;
}

/************************** USER HEADER PANEL ****************************/
#user_panel
{
    line-height: 50px;
    height: 50px;
    float: right;
    margin-top: 10px;
}

#user_panel button
{
    margin-right: 10px;
}

#header_links
{
    /*width: 500px;*/
    height: 50px;
    /*margin-right: 130px;*/
    /*float: right;*/
    /*text-align: right;*/
    line-height: 50px;
    float: right;
    margin-right: 20px;
}

#header a
{
    margin-right: 5px;
}

/****  ORG AND SPACE TITLE WITH CREATE, MODIFY AND DELETE  ****/
.section_title
{
    display: inline-block;
    position: relative;
    width: 60%;
    padding-bottom: 10px;
}
.section_title p
{
    margin: 0;
    font-size: 28px;
    font-weight: 400;
    padding-bottom: 10px;
}

.icons_options
{
    display: inline-block;
    position: relative;
    width: 38%;
    float: right;
}
.icons_options button
{
    float: right;
    margin-right: 7px;
}

/************************** FOOTER ****************************/


#footer_container
{
    background-repeat: repeat;
    background-attachment:fixed;

    background-color: <%= design['footer']['background-color'] %>;
    color: <%= design['footer']['font-color'] %>;

    border:1px solid <%= design['footer']['border-color'] %>;
    border-width: 1px 0 0 0;

    bottom:0;
    height:80px;
    left:0;
    position:fixed;
    width:100%;
}

#footer_container a
{
    color: <%= design['footer']['link-color'] %>;
}

#footer
{
    margin:0 auto;
    width:940px;
    text-align:center;
}

#footer #footer_links
{
    margin: 0;
    float: right;
}

#footer #copyright
{
    font-size: 13px;
    padding-top: 40px;
    display: inline-block;
}

#footer #footer-menu
{
    list-style: none;
    display: inline-block;
    float: left;
    font-size: 13px;
    text-align: left;
    padding: 0;
}

.icon-social
{
    display: inline-block;
    width: 44px;
    height: 44px;
    background: transparent url('../images/social_icons.png') no-repeat scroll 0 0;
    margin: 5px 0;
}

.icon-social.facebook
{
    background-position: 0 0;
}

.icon-social.twitter
{
    background-position: -88px 0;
}

/************************** BUTTONS ****************************/

button,
select
{
    border: 1px solid <%= design['button']['border-color'] %>;
    background-color: <%= design['button']['background-color'] %>;
    font-family: <%= design['font-family'] %>;
    color: <%= design['button']['font-color'] %>;
    height: 36px;
    cursor: pointer;
    cursor: hand;
    min-width: 70px;
}

button:hover
{
    border: 1px solid <%= design['button']['hover']['border-color'] %>;
    background-color: <%= design['button']['hover']['background-color'] %>;
    color: <%= design['button']['hover']['font-color'] %>;
}

button img
{
    vertical-align: middle;
}


/************************** BUTTONS WITH IMAGES ONLY ****************************/

<% design['image-buttons'].each do |size, images| %>
    <% images.each do |image, src| %>
button.image.s<%= size %>.<%= image %>
{
    min-width: 0;
    width: <%= size %>;
    height: <%= size %>;
    background-image: url('/images/<%= src %>');
    background-repeat: no-repeat;
    border: 0;
    background-color: transparent;
}

    <% end %>
<% end %>


/************************** SITE CONTAINER ****************************/

#container
{
    margin:0 auto;
    overflow:auto;
    padding:80px 0;
    width:940px;
}

#content
{

}

/************************** TILES ****************************/

.tile
{
    width: 280px;
    height: 170px;
    display: inline-block;
    margin: 0 10px 30px 10px;
    padding: 5px;
    position: relative;

    -webkit-border-radius: 2px;
    -moz-border-radius:2px;
    border-radius: 2px;
}
.square_tile
{
    position: relative;
    display: inline-block;
    width: 180px;
    height: 180px;
    margin: 0 10px 30px 10px;
    padding: 5px;

    -webkit-border-radius: 2px;
    -moz-border-radius:2px;
    border-radius: 2px;
}

.square_tile .bottom_left
{
    display: block;
    position: absolute;
    bottom: 0;
    left: 0;
    width: 80%;
    padding: 5px;
}

.tile:hover .tile.top,
.tile:hover .tile.right,
.tile:hover .tile.left
{
    -webkit-box-shadow: 0px 0px 15px rgba(50, 50, 50, 1);
    -moz-box-shadow:    0px 0px 15px rgba(50, 50, 50, 1);
    box-shadow:         0px 0px 15px rgba(50, 50, 50, 1);
}

.tile:hover .tile.top,
.tile:hover .tile.bottom,
.square_tile:hover
{
    top: -2px;
    left: -2px;
}


.tile.top
{
    width: 266px;
    height: 65px;
    margin: 0;
    position: relative;
}

.tile.bottom
{
    margin: 0;
    margin-top: 10px;
    width: 278px;
    height: 65px;
    padding: 0;
    position: relative;
}

.tile.left
{
    width: 120px;
    height: 65px;
    position: absolute;
    top: 0;
    left: 0;
    margin: 0;
}

.tile.right
{
    width: 120px;
    height: 65px;
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
}

.square_tile button,
.tile.top button
{
    position: absolute;
    bottom: 0;
    right: 0;
    margin: 5px;
}

.tile .tile_action
{
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    font-size: 25px;
}

.tile.top .tile_action
{
    width: 260px;
    height: 60px;
    display: block;
}

.tile .tile_info
{
    font-size: 15px;
}

/************************** TILE CATEGORIES ****************************/
/**************************  segmented    *****************************/

<% design['tiles'].each do |tile_type, tile_design| %>
.tile.<%= tile_type %> .tile.top
{
    background-color: <%= html2rgb(tile_design['top']['background-color'], design['tile-options']['opacity']) %>;
    border: 1px solid <%= tile_design['top']['border-color'] %>;
    background-image: url('<%= tile_design['top']["image-link"] %>');
    background-repeat: no-repeat;
    background-position: 98% 90%;
    color: <%= tile_design['top']['font-color'] %>;
}

.tile.<%= tile_type %>:hover .tile.top
{
    background-color: <%= html2rgb(tile_design['top']['background-color']) %>;
}

<% tile_design['top']['link'].each do |style, color| %>
.tile.<%= tile_type %> .tile.top a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

.tile.<%= tile_type %> .tile.left
{
    background-color: <%= html2rgb(tile_design['left']['background-color'], design['tile-options']['opacity']) %>;
    border: 1px solid <%= tile_design['left']['border-color'] %>;
    background-image: url('<%= tile_design['left']["image-link"] %>');
    background-repeat: no-repeat;
    background-position: 98% 90%;
    color: <%= tile_design['left']['font-color'] %>;
}

.tile.<%= tile_type %>:hover .tile.left
{
    background-color: <%= html2rgb(tile_design['left']['background-color']) %>;
}

<% tile_design['left']['link'].each do |style, color| %>
.tile.<%= tile_type %> .tile.left a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

.tile.<%= tile_type %> .tile.right
{
    background-color: <%= html2rgb(tile_design['right']['background-color'], design['tile-options']['opacity']) %>;
    border: 1px solid <%= tile_design['right']['border-color'] %>;
    background-image: url('<%= tile_design['right']["image-link"] %>');
    background-repeat: no-repeat;
    background-position: 98% 90%;
    color: <%= tile_design['right']['font-color'] %>;
}

.tile.<%= tile_type %>:hover .tile.right
{
    background-color: <%= html2rgb(tile_design['right']['background-color']) %>;
}

<% tile_design['right']['link'].each do |style, color| %>
.tile.<%= tile_type %> .tile.right a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

<% end %>



    /****************************  square    *******************************/

<% design['square_tiles'].each do |tile_type, tile_design| %>

.square_tile.<%= tile_type %>
{
    top: 0;
    left: 0;
    position: absolute;
    background-color: <%= html2rgb(tile_design['background-color'], design['tile-options']['opacity']) %>;
    border: 1px solid <%= tile_design['border-color'] %>;
    background-image: url('<%= tile_design["image-link"] %>');
    background-repeat: no-repeat;
    background-position: 50% 50%;
    color: <%= tile_design['font-color'] %>;

    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}
.square_tile.<%= tile_type %>:hover
{
    background-color: <%= html2rgb(tile_design['background-color']) %>;
    -webkit-box-shadow: 0px 0px 15px rgba(50, 50, 50, 1);
    -moz-box-shadow:    0px 0px 15px rgba(50, 50, 50, 1);
    box-shadow:         0px 0px 15px rgba(50, 50, 50, 1);
}

<% tile_design['link'].each do |style, color| %>
.square_tile.<%= tile_type %> a:<%= style %>
{
    color: <%= color %>;
}
<% end %>


<% end %>


    /************************** TAB MENU ****************************/
.tab_menu ul
{
    text-align: left;
    list-style: none;
    display: block;
    border-bottom: 1px solid <%= design['tab_menu']['border-color'] %>;
    left: -30px;
    color: <%= design['tab_menu']['font-color'] %>;
}

<% design['link'].each do |style, color| %>
.tab_menu a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

.tab_menu ul li
{
    text-align: left;
    display: inline-block;
    position: relative;
    padding: 5px;
    top: 1px;
    cursor: pointer;
}

.tab_menu ul li.selected
{
    border: 1px solid <%= design['tab_menu']['border-color'] %>;
    border-bottom: 2px solid <%= design['background-color'] %>;
    -webkit-border-top-left-radius: 3px;
    -webkit-border-top-right-radius: 3px;
    border-top-left-radius: 3px;
    border-top-right-radius: 3px;
    background-color: <%= design['tab_menu']['selected-item-background'] %>;
    color: <%= design['tab_menu']['selected-item-foreground'] %>;
}

/************************** MODAL FORM ****************************/

.modal
{
    position: fixed;
    top: 130px;
    left: 50%;
    z-index: 200;
    overflow: auto;

    border:2px solid <%= design['modal']['header']['background-color'] %>;

    width: 500px;
    margin-left: -250px;

    min-height: 150px;
    -moz-border-radius-topright:5px;
    -moz-border-radius-topleft:5px;
    -webkit-border-top-right-radius:5px;
    -webkit-border-top-left-radius:5px;
    border-top-left-radius:5px;
    border-top-right-radius:5px;
}

.hide
{
    display: none;
}
.show
{
    display: none;
}

.modal-background
{
    left: 0;
    top: 0;
    background: #000;
    z-index: 100;
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    opacity: 0.7;
}

.modal .modal_header
{
    background:<%= design['modal']['header']['background-color'] %>;
    color:<%= design['modal']['header']['font-color'] %>;
    padding:10px;
    margin: 0;
    font-size: 20px;
}

<% design['modal']['header']['link'].each do |style, color| %>
.modal .modal_header a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

.modal .modal_content
{
    color:<%= design['modal']['content']['font-color'] %>;
    padding:20px;
    display: block;
    background-color: <%= design['modal']['content']['background-color'] %>;
    min-height: 100px;
    margin-bottom: 40px;
}

<% design['modal']['content']['link'].each do |style, color| %>
.modal .modal_content a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

.modal .modal_footer
{
    background-color: <%= design['modal']['footer']['background-color'] %>;
    color: <%= design['modal']['footer']['font-color'] %>;
    padding: 5px;
    margin: 0;
    position: absolute;
    bottom: 0;
    right: 0;
    left: 0;
    text-align: right;
}

<% design['modal']['footer']['link'].each do |style, color| %>
.modal .modal_footer a:<%= style %>
{
    color: <%= color %>;
}
<% end %>

<% design['modal']['definitions'].each do |modal, properties| %>
.modal.<%= modal %>
{
    width: <%= properties['width'] %>px;
    margin-left: -<%= properties['width'] / 2 %>px;
}
<% end %>


/************************   APP DETAILS  *************************/

.app_details .modal_content div
{
    display: block;
    position: relative;
    padding: 0;
    margin: 0 0 20px 0;
}
.app_details .modal_content div:nth-child(1) .app_status
{
    font-size: 26px;
}
.app_details .modal_content div:nth-child(1) .app_status_buttons
{
    float: left;
    margin-right: 3px;
}
.app_details .modal_content div form
{
    width: 100%;
    padding-top: 5px;
    height: 45px;
}

.app_details .modal_content div table
{
    width: 100%;
    text-align: left;
}
.app_details .modal_content div table td:nth-child(1)
{
    width: 400px;
}
.app_details .modal_content div table td:nth-child(2)
{
    width: 200px;
}
.app_details .modal_content div table td:nth-child(3)
{
    width: 200px;
}
.app_details .modal_content div table td:nth-child(4)
{
    width: 70px;
    text-align: right;
}



/************************    APP Push    *************************/

.app_push.list
{
    display: inline-block;
    float: left;
    list-style: none;
    margin: 0 10px 0 0;
    padding: 0;
}
.app_push.list li
{
    background-color: <%= design['app_push']['list']['background-color'] %>;
    border: 1px solid <%= design['app_push']['list']['border-color'] %>;
    margin: 2px;
    padding: 3px 10px 3px 10px;
    cursor: pointer;
}

.template_app_name
{
    font-size: 26px;
}
.template_app_description
{
    min-height: 60px;
}
.template_app_logo
{
    float: right;
    margin: 0;
}
.query_link
{
    display: inline-block;
    position: relative;
    cursor: pointer;
    width: 24px;
    height: 24px;
    background-image: url("/images/link.png");
}

.tags_div,
.buttons_div
{
    display: inline-block;
    position: relative;
    margin: 0;
    width: 49%;
}

.template_apps .tag_span,
.template_apps .publisher_span
{
    color: <%= design['app_push']['tags']['tag_color'] %>;
}
.template_apps .tags
{
    color: <%= design['app_push']['tags']['text_color'] %>;
}

/************************** CONTROLS ****************************/

input[type=text], input[type=password], select
{
    font-size: 18px;
    padding: 5px;
    font-family: '<%= design['font-family'] %>';
    border: 1px solid <%= design['controls']['text']['border-color'] %>;
    background-color: <%= design['controls']['text']['background-color'] %>;
    color: <%= design['controls']['text']['font-color'] %>;
}

/************************** BREADCRUMBS ****************************/

.breadcrumb
{
    padding-left: 5px;
    margin-bottom: 10px;
    margin-right: 10px;
    text-align: right;
    font-family: 'Segoe UI Light', 'Open Sans', Verdana, Arial, Helvetica, sans-serif;
    font-weight: 400;
    font-size: <%= design['breadcrumb']['breadcrumb']['font-size'] %> !important;
    letter-spacing: 0.01em;
    color: <%= design['breadcrumb']['breadcrumb']['color'] %> !important;
}

.breadcrumb_element,
.breadcrumb_link
{
    padding: 0px;
    text-decoration: none;
    font-size: <%= design['breadcrumb']['breadcrumb']['font-size'] %> !important;
    color: <%= design['breadcrumb']['breadcrumb-element']['color'] %> !important;
}

.breadcrumb_link:hover
{
    padding: 0px;
    text-decoration: none;
    color: <%= design['breadcrumb']['breadcrumb-element']['hover'] %> !important;
}